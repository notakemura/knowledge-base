水平スケール＝台数を増やす。スケールアウト。  
垂直スケール＝性能を上げる。スケールアップ。  

---
**ストレージエンジン**  
ノード＝物理マシン または 仮想マシン（インスタンス）のこと  
クラスタ＝複数のノードを1つにまとめた、システム全体のこと  
DBMSは、クライアントサーバモデルが使用される。（ノード＝サーバ。クライアント＝アプリケーション。）  

1. クライアントのリクエスト
2. 転送サブシステム
3. クエリプロセッサ（パーサ、オプティマイザ）
4. 実行エンジン
5. ストレージエンジン（トランザクションマネージャ、ロックマネージャ、アクセスメソッド、バッファマネージャ、リカバリマネージャ）

列指向DBMS  
＝Amazon Redshift, Google BigQueryなど。  
＝同じ列の値がディスク上で隣接して格納されるので、列ごとの集計などが得意。  

行指向DBMS  
＝MySQLなど。  
＝行単位でデータアクセスが必要なケースで有用。  

ワイドカラムストア  
＝？ 

Note：  
んじゃ、集計系はMySQLよりRedshiftの方が速いってこと？要検証。  

データファイル＝データレコードを格納。インデックス構成表、ヒープ構成表（MySQLはこれ）、ハッシュ構成表のいずれか。  
インデックスファイル＝レコードメタデータを格納。データファイル上での位置やオフセットを格納する。  
※MySQLのInnoDBの場合、主キーはインデックスファイル側でデータも持っていて、非主キーは主キーの値がマッピングされている。  

Note：  
MySQLもPostgreSQLもヒープ構成表を採用してる。ほとんどがこれっぽい。  
ハッシュ構成表はデータとインデックスを一緒に持つ。  
データレコードの参照を、データファイルへのオフセットを指定するか、主キー経由にするか、議論が分かれるらしい。  

※ファイルオフセット＝データの格納先を示す、バイト単位のアドレス。  

ストレージ構造の変動要素３つ  
①バッファリングを使用  
※バッファリング＝HDDに書き込む前にRAMに一時的に書き込むこと。  
②イミュータブルのファイルを使用  
※イミュータブル＝不変。  
③一定のオーダーに従って格納  

Note：  
変動要素なので、ストレージシステムを定義するときに変更できるということ。  
パフォーマンスのボトルネックがここにある可能性もある？  

---
**Ｂツリーの基本**  
Bツリーを体系化した論文  
[The Ubiquitous B-Tree DOUGLAS COMER](https://jameshunt.us/papers/comer79.pdf)

二分探索木（BST）：ルートノードから始まり、各ツリーノードが２つの子ポインタを持つ。バランスが保たれない可能性があり、最悪でO（N）になる。メンテナンスを頻繁に行う必要があるので、あまりよくない。  

Note：  
ディスク内部の説明もあったけど難しい。いったんスルー。  

Bツリー：ルートノード、中間ノード、リーフノードからなる。BSTより幹が太く、ディスクI/Oを最小化できる。  
